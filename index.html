<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hướng Dẫn Công Thức Pha Chế</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
        }
        .accordion-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            text-left: p-5;
            font-semibold: text-lg;
            bg-gradient-to-r: from-gray-50 to-gray-100;
            text-gray-700;
            padding: 1rem;
            border: none;
            background: linear-gradient(to right, #f9fafb, #f3f4f6);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .accordion-button:hover {
            background-color: #e5e7eb;
        }
        .accordion-button::after {
            content: '\25BC';
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }
        .accordion-button.open::after {
            transform: rotate(180deg);
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            padding: 0 1rem;
            background-color: #f9fafb;
            color: #4b5563;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        .accordion-content.open {
            max-height: 2000px;
            padding: 1rem;
        }
        .nav-link {
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .nav-link:hover {
            color: #1d4ed8;
            transform: translateX(5px);
        }
        .section-title {
            position: relative;
            display: inline-block;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 50%;
            height: 3px;
            background: #3b82f6;
            transition: width 0.3s ease;
        }
        .section-title:hover::after {
            width: 100%;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal.open {
            display: flex;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .modal-content h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .modal-content label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .modal-content input, .modal-content textarea, .modal-content select {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
        }
        .modal-content textarea {
            min-height: 100px;
        }
        .modal-content button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            margin-right: 0.5rem;
        }
        .error-message {
            background: #fee2e2;
            color: #b91c1c;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .success-message {
            background: #d1fae5;
            color: #065f46;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .export-section {
            background: #fefce8;
            border: 2px solid #eab308;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        .export-section h3 {
            color: #a16207;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-8 text-center shadow-lg">
        <h1 class="text-4xl font-bold tracking-tight hover:text-blue-200 transition-colors duration-300">Hướng Dẫn Công Thức Pha Chế</h1>
    </header>

    <main class="container mx-auto p-6 max-w-5xl">
        <div class="mb-6 flex flex-wrap gap-2">
            <button onclick="openModal('add')" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">Thêm Công Thức</button>
            <button onclick="exportData()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">Xuất Dữ Liệu</button>
            <button onclick="resetData()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">Reset về mặc định</button>
        </div>

        <nav class="bg-white shadow-xl rounded-2xl p-6 mb-8 transform hover:scale-[1.01] transition-transform duration-300">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 section-title">Mục Lục</h2>
            <ul class="space-y-3">
                <li><a href="#feca" class="text-blue-600 hover:underline nav-link block">Feca Pha Chế</a></li>
                <li><a href="#coffee" class="text-blue-600 hover:underline nav-link block">Cà Phê</a></li>
                <li><a href="#frappe" class="text-blue-600 hover:underline nav-link block">Đá Xay</a></li>
                <li><a href="#matcha" class="text-blue-600 hover:underline nav-link block">Matcha</a></li>
                <li><a href="#tea" class="text-blue-600 hover:underline nav-link block">Trà Sữa & Trà</a></li>
            </ul>
        </nav>

        <section id="feca" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 section-title">Feca Pha Chế</h2>
            <div class="space-y-4" id="feca-recipes"></div>
        </section>

        <section id="coffee" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 section-title">Cà Phê</h2>
            <div class="space-y-4" id="coffee-recipes"></div>
        </section>

        <section id="matcha" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 section-title">Matcha</h2>
            <div class="space-y-4" id="matcha-recipes"></div>
        </section>

        <section id="frappe" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 section-title">Đá Xay</h2>
            <div class="space-y-4" id="frappe-recipes"></div>
        </section>

        <section id="tea" class="mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 section-title">Trà Sữa & Trà</h2>
            <div class="space-y-4" id="tea-recipes"></div>
        </section>

        <!-- Modal thêm/sửa công thức -->
        <div id="recipeModal" class="modal">
            <div class="modal-content">
                <h2 id="modalTitle">Thêm Công Thức</h2>
                <form id="recipeForm">
                    <label for="recipeName">Tên Công Thức</label>
                    <input type="text" id="recipeName" required>
                    <label for="recipeSection">Phần</label>
                    <select id="recipeSection" required>
                        <option value="feca">Feca Pha Chế</option>
                        <option value="coffee">Cà Phê</option>
                        <option value="frappe">Đá Xay</option>
                        <option value="matcha">Matcha</option>
                        <option value="tea">Trà Sữa & Trà</option>
                    </select>
                    <label for="recipeIngredients">Nguyên Liệu</label>
                    <textarea id="recipeIngredients" placeholder="Nhập nguyên liệu (mỗi dòng một nguyên liệu)"></textarea>
                    <label for="recipeInstructions">Cách Làm</label>
                    <textarea id="recipeInstructions" placeholder="Nhập cách làm (mỗi dòng một bước)"></textarea>
                    <label for="recipeNotes">Ghi Chú (Tùy chọn)</label>
                    <textarea id="recipeNotes" placeholder="Nhập ghi chú nếu có"></textarea>
                    <input type="hidden" id="recipeId">
                    <div class="flex justify-end">
                        <button type="button" onclick="closeModal()" class="bg-gray-500 text-white hover:bg-gray-600">Hủy</button>
                        <button type="submit" class="bg-blue-600 text-white hover:bg-blue-700">Lưu</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal xuất dữ liệu -->
        <div id="exportModal" class="modal">
            <div class="modal-content">
                <h2>Xuất Dữ Liệu Công Thức</h2>
                <div class="export-section">
                    <h3>Hướng dẫn cập nhật:</h3>
                    <p class="text-sm text-gray-700">1. Copy đoạn code bên dưới</p>
                    <p class="text-sm text-gray-700">2. Thay thế phần defaultRecipes trong file HTML gốc</p>
                    <p class="text-sm text-gray-700">3. Commit và push lên GitHub</p>
                </div>
                <div class="code-block" id="exportedData"></div>
                <div class="flex justify-end mt-4">
                    <button onclick="copyToClipboard()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mr-2">Copy</button>
                    <button onclick="closeExportModal()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">Đóng</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white text-center py-6">
        <p class="text-sm">© 2025 Công Thức Pha Chế</p>
        <p class="text-sm mt-2">Liên hệ: <a href="mailto:info@phache.com" class="hover:text-blue-300 transition-colors">info@phache.com</a></p>
    </footer>

    <script>
        // Default recipes data
        const defaultRecipes = {
            feca: [
                { id: 'feca1', name: 'Công thức nấu Tofu', ingredients: ['Bột tofu (tàu hủ): 100g', 'Nước: 500ml'], instructions: ['Giảm lửa xuống 800 (riu lửa).', 'Vừa đổ bột vào vừa khuấy đều bằng muỗng.', 'Khuấy xong, vừa lên tím thì tắt lửa.', 'Cho trực tiếp vào hủ đựng tofu với 40g.'], notes: '' },
                { id: 'feca2', name: 'Công thức nấu Hồng Trà (Trà trái cây)', ingredients: ['Hồng trà: 100g', 'Nước: 1.400ml', 'Đá: 400g'], instructions: ['Để nước sôi vào ca đong, bấm đồng hồ 2 phút để giảm nhiệt độ nước.', 'Bỏ trà vào, đậy nắp hở, ủ trong 12 phút.', 'Ủ xong, lấy ra cho chảy hết nước tự nhiên (không vắt).', 'Cho đá vào.'], notes: '' },
                { id: 'feca3', name: 'Công thức nấu Olong + Hồng Trà (Olong Sữa, 2 mẻ)', ingredients: ['Olong: 160g', 'Hồng trà: 40g', 'Nước: 2.000ml', 'Nước đá: 400g'], instructions: ['Ủ trong 20 phút.', 'Cho nước đá vào.'], notes: '' },
                { id: 'feca4', name: 'Công thức nấu Hồng Trà Sữa (2 mẻ)', ingredients: ['Hồng trà: 200g', 'Nước: 2.000ml', 'Nước đá: 400g'], instructions: ['Ủ trong 20 phút.', 'Cho nước đá vào.'], notes: '' },
                { id: 'feca5', name: 'Kem Sữa', ingredients: ['Sữa tươi (khối lượng nhỏ): 50g', 'ON TOP (khối lượng nhỏ): 105g', 'Sữa tươi (khối lượng lớn): 100g', 'ON TOP (khối lượng lớn): 210g'], instructions: [], notes: 'Cho toàn bộ nguyên liệu vào ca, khuấy đều cho hợp, nguyên liệu có thể, sau đó sử dụng máy đánh kem đánh ở mức 4 trong 35s thêm 5s nếu thấy vẫn còn lỏng.' },
                { id: 'feca6', name: 'Nấu Trân Châu Đen', ingredients: [], instructions: ['Đun sôi nước (không để trân châu chạm đáy).', 'Nước sôi, hạ nhiệt xuống 1.600.', 'Thả trân châu vào.'], notes: '' },
                { id: 'feca7', name: 'Công thức pha Cà Phê Muối (6 ly M)', ingredients: ['Cà phê nước: 120ml', 'Sữa đặc: 216g', 'Kem sữa: 198g (18 thìa)', 'Muối: 2g', 'Size M: 100ml', 'Size L: 150ml'], instructions: [], notes: '' },
                { id: 'feca8', name: 'Công thức pha Cà Phê Muối (12 ly M)', ingredients: ['Cà phê nước: 240ml', 'Sữa đặc: 432g', 'Kem sữa: 396g', 'Muối: 4g', 'Size M: 100ml', 'Size L: 150ml'], instructions: [], notes: '' },
                { id: 'feca9', name: 'Công thức pha Cà Phê Muối (18 ly M)', ingredients: ['Cà phê nước: 360g', 'Sữa đặc: 648g', 'Kem sữa: 594g', 'Muối: 6g', 'Size M: 100ml', 'Size L: 150ml'], instructions: [], notes: '' },
                { id: 'feca10', name: 'Công thức pha Cà Phê Kem Sữa (10 ly M)', ingredients: ['Cà phê nước: 140ml', 'Sữa tươi: 560g', 'Nước đường: 160g'], instructions: [], notes: 'Cho toàn bộ nguyên liệu vào ly (pha theo ly) hoặc ca (pha số lượng lớn), dùng thìa khuấy đều cho hợp hơn.' },
                { id: 'feca11', name: 'Công thức pha Cà Phê Kem Sữa (1 ly M)', ingredients: ['Cà phê nước: 14g', 'Sữa tươi: 56g', 'Nước đường: 16g'], instructions: [], notes: 'Cho toàn bộ nguyên liệu vào ly (pha theo ly) hoặc ca (pha số lượng lớn), dùng thìa khuấy đều cho hợp hơn.' },
                { id: 'feca12', name: 'Công thức pha Cà Phê Kem Sữa (1 ly L)', ingredients: ['Cà phê nước: 22g', 'Sữa tươi: 88g', 'Nước đường: 25g'], instructions: [], notes: 'Cho toàn bộ nguyên liệu vào ly (pha theo ly) hoặc ca (pha số lượng lớn), dùng thìa khuấy đều cho hợp hơn.' },
                { id: 'feca13', name: 'Nước Đường', ingredients: ['Đường cát (khối lượng nhỏ): 1000g', 'Nước sôi 100% (khối lượng nhỏ): 700g', 'Đường cát (khối lượng lớn): 2000g', 'Nước sôi 100% (khối lượng lớn): 1400g'], instructions: [], notes: '' },
                { id: 'feca14', name: 'Kem Matcha', ingredients: ['Sữa tươi (1 ly): 30g', 'Bột matcha (1 ly): 4g', 'Sữa đặc (1 ly): 14g', 'Rick lùn (1 ly): 30g', 'Sữa tươi (4 ly): 120g', 'Bột matcha (4 ly): 16g', 'Sữa đặc (4 ly): 56g', 'Rick lùn (4 ly): 120g'], instructions: [], notes: 'Cho lần lượt SỮA TƯƠI, BỘT MATCHA dùng thìa khuấy đều sau đó dùng máy đánh bột (ly), đánh kem (ca) trong 30s cho tan bột matcha. Đóng tiếp SỮA ĐẶC, RICK LÙN vào và đánh tiếp từ 1p30s - 2p cho sệt mịn.' }
            ],
            coffee: [
                { id: 'coffee1', name: 'Espresso Đá', ingredients: ['Cà phê máy 1 shot', '80% ngọt: 6ml đường', '100% ngọt: 8ml đường', '120% ngọt: 10ml đường'], instructions: ['Trình bày đá riêng'], notes: '' },
                { id: 'coffee2', name: 'Espresso Sữa Đá', ingredients: ['Cà phê máy 1 shot', '80% ngọt: 14g sữa đặc', '100% ngọt: 28g sữa đặc', '120% ngọt: 42g sữa đặc'], instructions: ['Trình bày đá riêng'], notes: '' },
                { id: 'coffee3', name: 'Phin Đen Đá', ingredients: ['CF phin: 40ml (M), 45ml (L)', 'Đường: 8ml (M), 12ml (L)'], instructions: [], notes: '' },
                { id: 'coffee4', name: 'Phin Sữa Đá', ingredients: ['CF phin: 45ml (M), 60ml (L)', 'Sữa đặc: 2pump 28g (M), 3pump 42g (L)'], instructions: ['Trình bày đá riêng'], notes: '' },
                { id: 'coffee5', name: 'Bạc Xỉu Đá (Ly Nhựa lớn Nhựa Size L)', ingredients: ['Cà phê máy 1 shot', 'Sữa đặc: 70g', 'Sữa tươi: 30g'], instructions: ['Đổ vào bình shake đánh bằng máy đánh sữa, làm nguội đổ ra ly và bỏ đá'], notes: '' },
                { id: 'coffee6', name: 'Bạc Xỉu Nóng', ingredients: ['Cà phê máy 1 shot', 'Sữa đặc: 56g', 'Sữa tươi: 20g'], instructions: ['Ngâm bình lắc và tách trong nước sôi 100 độ làm nóng, khuấy đều tới khi tan đổ ra tách đã làm nóng'], notes: '' },
                { id: 'coffee7', name: 'Café Muối', ingredients: ['CF muối: 70ml (M), 110ml (L)'], instructions: ['Bỏ bình lắc, lắc đều cho ra ly thêm 1 muỗng kem và cacao trang trí'], notes: '' },
                { id: 'coffee8', name: 'Sữa Tươi CF (Ly Nhựa Size L)', ingredients: ['Sữa tươi: 130g (130ml)', 'Nước đường: 28g (24ml)', 'CF nước: 10ml'], instructions: ['Khuấy đều cho đá gần đầy ly, CF nước 10ml rưới lên bề mặt ly'], notes: '' },
                { id: 'coffee9', name: 'Ngọc Trai FECA', ingredients: ['Trân châu trắng: 40g (size M), 50g (size L)', 'Mix Ngọc Trai Feca: 84ml (size M), 132ml (size L)', 'Thêm đá cách miệng ly 1cm', 'Kem sữa: 65ml đổ đều lên bằng phẳng', 'Trang trí: Rắc cacao bề mặt'], instructions: ['Khuấy đều cho đá gần đầy ly, CF nước 10ml rưới lên bề mặt ly'], notes: '' },
                { id: 'coffee10', name: 'Cacao Đá', ingredients: ['Nước đường: 40g (40ml)', 'Bột cacao: 20g', 'Nước sôi: 80g'], instructions: ['Dùng máy đánh bọt đánh tan hỗn hợp và để nguội, sau đó đổ vào ly và cho đá đầy'], notes: '' },
                { id: 'coffee11', name: 'Cacao Sữa Đá', ingredients: ['Sữa đặc: 56g', 'Bột cacao: 20g', 'Nước sôi: 80g'], instructions: ['Dùng máy đánh bọt đánh tan hỗn hợp và để nguội, sau đó đổ vào ly và cho đá đầy'], notes: '' },
                { id: 'coffee12', name: 'Ủ Cà Phê Phin (Dùng Cà Phê Gu Việt Xay Sẵn)', ingredients: ['Cà phê Gu Việt (xay sẵn): 150g (cho 1 phin)', 'Nước sôi (lần 1): 250ml', 'Nước sôi (lần 2): 330ml'], instructions: ['Cho 150g cà phê vào phin, vỗ nhẹ để bề mặt cà phê đều.', 'Nén cà phê: Nam nén ở mức độ 4 (trên thang 10), nữ nén ở mức độ 6 hoặc 7 (chặt hơn).', 'Lần 1: Đổ 250ml nước sôi vào phin, đậy nắp và ủ trong 13 phút (giữ nắp nén).', 'Sau khi ủ xong, mở nắp, gạt cà phê dính trên nắp nén xuống, rải đều lại bề mặt cà phê, nén nhẹ tay.', 'Lần 2: Đổ 330ml nước sôi vào phin, giữ nắp nén.', 'Khi nước chảy hết, nghiêng phin để kiểm tra xem nước đã chảy hết chưa.'], notes: '' }
            ],
            matcha: [
                { id: 'matcha1', name: 'Matcha Coco', ingredients: ['Nước dừa: 150ml', 'Nước đường: 23g (2 pump)', 'Kem Matcha: 70g (150ml)'], instructions: ['Khuấy đều sau đó đổ đá ngang miệng ly, trang trí bột matcha'], notes: '' },
                { id: 'matcha2', name: 'Matcha Latte', ingredients: ['Bột: 5g + 50ml nước sôi', 'Sữa tươi: 150ml', 'Vanila: 15ml', 'Sữa đặc: 30ml'], instructions: ['Dùng máy đánh bọt đánh tan matcha', 'Đong vào ly size L 3 hỗn hợp', 'Sau đó múc đá cách mép ly 1cm', 'Rưới matcha lên'], notes: '' },
                { id: 'matcha3', name: 'Matcha Tofu', ingredients: ['Matcha nhật Haru: 5g + 50 ml nước sôi', 'Sữa tươi Oatside: 150
